# 迭代优化

基于已有提示词进行针对性改进。

## 核心概念

迭代优化不是重新优化，而是在**已有优化结果**的基础上，根据新的需求进行**小步调整**。

## 模板类型

### 1. 通用迭代 (iterate)

**适用场景**: 基于具体问题和需求对已有提示词进行针对性调整

**触发方式**:
```
迭代：
原始提示词：xxx
改进需求：让输出更简洁
```

---

### 2. 上下文迭代 (context-iterate)

**适用场景**: 在多轮对话上下文中进行迭代

**触发方式**:
```
上下文迭代：
之前的提示词：xxx
新增需求：xxx
```

**特点**:
- 结合上下文信息
- 工具信息辅助
- 小步快迭

---

### 3. 图像迭代 (image-iterate-general)

**适用场景**: 图像提示词的渐进改进

**触发方式**:
```
图像迭代：
上次优化结果：xxx
改进需求：增加细节
```

**原则**:
- 保持风格连续
- 视觉意图一致
- 渐进改进

---

## 核心原则

### 要 ✅

- 保持原始提示词的核心意图
- 将改进需求恰当融入
- 保持原有语言风格
- 精准修改，避免过度调整

### 不要 ❌

- 不要误解为直接执行需求
- 不要大幅重构
- 不要改变核心功能

---

## 示例

### 示例1: 通用迭代

**原始提示词**:
> 你是客服助手，帮用户解决问题

**改进需求**:
> 不要交互

**✅ 正确结果**:
> 你是客服助手，帮用户解决问题。请直接提供完整解决方案，不要与用户进行多轮交互确认。

**❌ 错误理解**:
> 好的，我不会与您交互

---

### 示例2: 格式调整

**原始提示词**:
> 分析数据并给出建议

**改进需求**:
> 输出JSON格式

**✅ 正确结果**:
> 分析数据并给出建议，请以JSON格式输出分析结果

---

### 示例3: 风格调整

**原始提示词**:
> 你是写作助手

**改进需求**:
> 更专业一些

**✅ 正确结果**:
> 你是专业的写作顾问，具备丰富的写作经验，能够提供专业的写作指导、文案优化和内容改进建议。

---

### 示例4: 图像迭代

**上次优化**:
> 一只可爱的银渐层猫，蓝眼睛，圆脸，坐在毛毯上，下午柔和自然光，温馨居家氛围，摄影棚布景

**改进需求**:
> 增加更多细节，让猫更生动

**✅ 正确结果**:
> 一只可爱的银渐层猫，蓝眼睛如星辰般明亮，圆脸甜美，耳朵微微向后靠在头上。坐在柔软的米白色羊毛毯上，毛发蓬松细腻，阳光透过蕾丝窗帘洒落柔和光斑。背景是模糊的欧式家具，梦幻氛围。增添蝴蝶落在猫背上增添生动感。

---

## 工作流程

1. **分析原始提示词** - 理解核心功能和结构
2. **理解改进需求** - 是添加功能？修改方式？还是增加约束？
3. **恰当融入** - 将需求融入原始提示词
4. **输出完整** - 保持原有格式，输出完整修改后版本

---

## 对应模板

| 模板 | 文件 |
|------|------|
| 通用迭代 | iterate.ts |
| 上下文迭代 | context-iterate.ts |
| 图像迭代 | image-iterate-general.ts |
